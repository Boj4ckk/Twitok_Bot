{% extends 'base.html' %}
{% block content %}

<h1>Fetch Twitch Videos</h1>
<form method="POST">
    <label for="username">Twitch Username:</label>
    <input type="text" id="username" name="username" required>
    
    <label for="min_views">Min Views:</label>
    <input type="number" id="min_views" name="min_views" min="0">

    <label for="max_views">Max Views:</label>
    <input type="number" id="max_views" name="max_views" min="0">

    <button type="submit">Fetch Videos</button>
</form>

{% if videos %}
<h2>Videos</h2>
<ul>
    {% for video in videos %}
        <li>
            {{ video.title }} ({{ video.view_count }} views)
            <form method="POST" action="/download">
                <input type="hidden" name="video_id" value="{{ video.id }}">
                <button type="submit">Download</button>
            </form>
        </li>
    {% endfor %}
</ul>
{% endif %}
{% endblock %}